from skewer import *

@command
def generate(app):
    """
    Generate master.adoc from the data in asciidoc.yaml
    """
    generate_readme("asciidoc.yaml", "master.adoc")

@command
def test(app):
    """
    Test the example using Minikube
    """
    generate_readme("asciidoc.yaml", make_temp_file())
    run_steps_on_minikube("asciidoc.yaml")

@command
def test_external(app, west_kubeconfig, east_kubeconfig):
    """
    Test the example against external clusters
    """
    generate_readme("asciidoc.yaml", make_temp_file())
    run_steps_external("asciidoc.yaml", west=west_kubeconfig, east=east_kubeconfig)

@command
def clean(app):
    remove("python/__pycache__")
